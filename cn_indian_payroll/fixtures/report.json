[
 {
  "add_total_row": 1,
  "columns": [],
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Report",
  "filters": [],
  "is_standard": "No",
  "javascript": "\nfrappe.query_reports[\"Salary Slip Registers\"] = {\n    \"filters\": [\n        {\n            \"label\": \"Employee ID\",\n            \"fieldname\": \"employee\",\n            \"fieldtype\": \"Link\",\n            \"options\": \"Employee\",\n            \"width\": 200\n        },\n        {\n            \"label\": \"Income Tax Slab\",\n            \"fieldname\": \"income_tax\",\n            \"fieldtype\": \"Link\",\n            \"options\": \"Income Tax Slab\",\n            \"width\": 200\n        },\n        \n         {\n            \"label\": \"From date\",\n            \"fieldname\": \"from_date\",\n            \"fieldtype\": \"Date\",\n            \n            \"width\": 200\n        },\n         {\n            \"label\": \"To Date\",\n            \"fieldname\": \"to_date\",\n            \"fieldtype\": \"Date\",\n            \n            \"width\": 200\n        },\n        \n        \n        \n    ]\n}\n",
  "json": null,
  "letter_head": "",
  "modified": "2024-07-05 12:51:05.350613",
  "module": "cn-indian-payroll",
  "name": "Salary Slip Registers",
  "prepared_report": 0,
  "query": null,
  "ref_doctype": "Salary Slip",
  "reference_report": null,
  "report_name": "Salary Slip Registers",
  "report_script": "\ncolumns = [\n    \n    {\"fieldname\": \"ss_id\", \"label\": \"Salary Slip ID\", \"fieldtype\": \"Data\", \"width\": 150},\n    \n    \n    \n    {\"fieldname\": \"employee\", \"label\": \"Employee ID\", \"fieldtype\": \"Data\", \"width\": 150},\n    {\"fieldname\": \"employee_name\", \"label\": \"Employee Name\", \"fieldtype\": \"Data\", \"width\": 150},\n    {\"fieldname\": \"income_tax_slab\", \"label\": \"Income Tax Slab\", \"fieldtype\": \"Data\", \"width\": 150},\n    {\"fieldname\": \"employee_state\", \"label\": \"Employee State\", \"fieldtype\": \"Data\", \"width\": 150},\n    \n    {\"fieldname\": \"working_days\", \"label\": \"Working Days\", \"fieldtype\": \"Data\", \"width\": 150},\n    {\"fieldname\": \"payment_days\", \"label\": \"Payment Days\", \"fieldtype\": \"Data\", \"width\": 150},\n    {\"fieldname\": \"LOP\", \"label\": \"LOP\", \"fieldtype\": \"Data\", \"width\": 150},\n    \n    {\"fieldname\": \"start_date\", \"label\": \"Start Date\", \"fieldtype\": \"Date\", \"width\": 150},\n    {\"fieldname\": \"end_date\", \"label\": \"End Date\", \"fieldtype\": \"Date\", \"width\": 150},\n    \n    {\"fieldname\": \"annual_ctc\", \"label\": \"Annual CTC\", \"fieldtype\": \"Currency\", \"width\": 150},\n    {\"fieldname\": \"monthly_ctc\", \"label\": \"Monthly CTC\", \"fieldtype\": \"Currency\", \"width\": 150},\n    \n    {\"fieldname\": \"basic\", \"label\": \"Basic\", \"fieldtype\": \"Currency\", \"width\": 100},\n    {\"fieldname\": \"hra\", \"label\": \"HRA\", \"fieldtype\": \"Currency\", \"width\": 100},\n    {\"fieldname\": \"twa_dfi\", \"label\": \"TWA DFI\", \"fieldtype\": \"Currency\", \"width\": 100},\n    {\"fieldname\": \"uniform_allowance\", \"label\": \"Uniform Allowance\", \"fieldtype\": \"Currency\", \"width\": 150},\n    {\"fieldname\": \"medical_allowance\", \"label\": \"Medical Allowance\", \"fieldtype\": \"Currency\", \"width\": 150},\n    \n    {\"fieldname\": \"food_coupon\", \"label\": \"Food Coupon\", \"fieldtype\": \"Currency\", \"width\": 150},\n    {\"fieldname\": \"heema\", \"label\": \"HEEMA\", \"fieldtype\": \"Currency\", \"width\": 100},\n    {\"fieldname\": \"bonus\", \"label\": \"Bonus\", \"fieldtype\": \"Currency\", \"width\": 100},\n    #{\"fieldname\": \"bonus_accrual\", \"label\": \"Bonus Accrual\", \"fieldtype\": \"Currency\", \"width\": 100},\n    \n    {\"fieldname\": \"petrol_reimbursement\", \"label\": \"Petrol Reimbursement\", \"fieldtype\": \"Currency\", \"width\": 200},\n    {\"fieldname\": \"vehicle_maintenance_reimbursement\", \"label\": \"Vehicle Maintenance Reimbursement\", \"fieldtype\": \"Currency\", \"width\": 250},\n    {\"fieldname\": \"driver_salary_reimbursement\", \"label\": \"Driver Salary Reimbursement\", \"fieldtype\": \"Currency\", \"width\": 200},\n    {\"fieldname\": \"leave_travel_allowance\", \"label\": \"Leave Travel Allowance\", \"fieldtype\": \"Currency\", \"width\": 200},\n    \n    \n    {\"fieldname\": \"car_perquisite\", \"label\": \"Car Perquisite\", \"fieldtype\": \"Currency\", \"width\": 200},\n    {\"fieldname\": \"driver_perquisite\", \"label\": \"Driver Perquisite\", \"fieldtype\": \"Currency\", \"width\": 200},\n    \n    \n    {\"fieldname\": \"employee_provident_fund\", \"label\": \"Employee Provident Fund\", \"fieldtype\": \"Currency\", \"width\": 200},\n    {\"fieldname\": \"nps\", \"label\": \"NPS\", \"fieldtype\": \"Currency\", \"width\": 100},\n    {\"fieldname\": \"esic\", \"label\": \"ESIC\", \"fieldtype\": \"Currency\", \"width\": 100},\n    {\"fieldname\": \"bonus_deduction\", \"label\": \"Bonus Deduction\", \"fieldtype\": \"Currency\", \"width\": 150},\n   \n\n    {\"fieldname\": \"pt_g\", \"label\": \"Professional Tax (Gujarat)\", \"fieldtype\": \"Currency\", \"width\": 200},\n    {\"fieldname\": \"pt_m\", \"label\": \"Professional Tax (Maharashtra)\", \"fieldtype\": \"Currency\", \"width\": 200},\n    {\"fieldname\": \"pt_ka\", \"label\": \"Professional Tax (Karnataka)\", \"fieldtype\": \"Currency\", \"width\": 200},\n    {\"fieldname\": \"pt_ke\", \"label\": \"Professional Tax (Kerala)\", \"fieldtype\": \"Currency\", \"width\": 200},\n    {\"fieldname\": \"pt_w\", \"label\": \"Professional Tax (West Bengal)\", \"fieldtype\": \"Currency\", \"width\": 200},\n    {\"fieldname\": \"pt_an\", \"label\": \"Professional Tax (Andra Pradesh)\", \"fieldtype\": \"Currency\", \"width\": 200},\n    \n    \n    \n    {\"fieldname\": \"income_tax\", \"label\": \"Income Tax\", \"fieldtype\": \"Currency\", \"width\": 100},\n   {\"fieldname\": \"gross_pay\", \"label\": \"Gross Pay\", \"fieldtype\": \"Currency\", \"width\": 100},\n    {\"fieldname\": \"net_pay\", \"label\": \"Net Pay\", \"fieldtype\": \"Currency\", \"width\": 100},\n    {\"fieldname\": \"total_deduction\", \"label\": \"Total Deduction\", \"fieldtype\": \"Currency\", \"width\": 150},\n    \n    \n    \n     \n    \n    \n    \n]\n\n\n\n\n\n\n\n\n\n\n\ndef get_salary_slips(filters=None):\n    if filters is None:\n        filters = {}\n\n    conditions = {}\n    if filters.get(\"employee\"):\n        conditions[\"employee\"] = filters[\"employee\"]\n        \n    if filters.get(\"from_date\"):\n        conditions[\"start_date\"] = (\">=\", filters[\"from_date\"])\n        \n    if filters.get(\"to_date\"):\n        conditions[\"end_date\"] = (\"<=\", filters[\"to_date\"])\n        \n    if filters.get(\"income_tax\"):\n        conditions[\"custom_income_tax_slab\"] = filters[\"income_tax\"]\n        \n        \n        \n        \n    data = frappe.get_list(\n        'Salary Slip',\n        fields=[\"*\"],\n        filters=conditions,\n        order_by=\"name DESC\",\n       \n    )\n   \n    return data\n    \nss_id=[]   \ntotal_working_days=[]\npayment_days=[]\nleave_without_pay=[]\nemployee = []\nemployee_name = []\nbasic = []\nhra = []\ntwa = []  \nuniform = []\nmedical = []\nfood_coupon = []\nheema = []\n\nfuel = []  \ndriver = [] \nvehicle=[]\nlta = []  \n\nepf=[]\nnps=[]\nesic=[]\n\npt_g=[]\npt_m=[]\npt_an=[]\npt_w=[]\npt_kar=[]\npt_ker=[]\nincome_tax_slab=[]\nemployee_state=[]\nannual_ctc=[]\nmonthly_ctc=[]\n\ntotal_deduction=[]\nnet_pay=[]\ngross_pay=[]\nincome_tax=[]\n\ncar_perquisite=[]\ndriver_perquisite=[]\nstart_date=[]\nend_date=[]\n\nbonus_deduction=[]\n\nbonus=[]\nbonus_accrual=[]\n\ndata=[]\n\nlead_data = get_salary_slips(filters)\n\nfor slip in lead_data:\n    doc = frappe.get_doc('Salary Slip', slip.name)\n    employee.append(doc.employee)\n    employee_name.append(doc.employee_name)\n    total_deduction.append(doc.total_deduction)\n    net_pay.append(doc.net_pay)\n    \n    ss_id.append(doc.name) \n    total_working_days.append(doc.total_working_days) \n    payment_days.append(doc.payment_days) \n    leave_without_pay.append(doc.leave_without_pay) \n    gross_pay.append(doc.custom_statutory_grosspay)\n    \n    income_tax_slab.append(doc.custom_income_tax_slab)\n    employee_state.append(doc.custom_employee_state)\n    annual_ctc.append(doc.custom_annual_ctc)\n    monthly_ctc.append(doc.custom_annual_ctc/12)\n   \n    start_date.append(doc.start_date)\n    end_date.append(doc.end_date)\n    \n    uniform_amount = 0  \n    medical_amount = 0 \n    hra_amount=0\n    basic_amount=0\n    twa_amount=0\n    food_coupon_amount=0\n    heema_amount=0\n    petrol_amount=0\n    vehicle_amount=0\n    driver_amount=0\n    lta_amount=0\n    car_perquisite_amount=0\n    driver_perquisite_amount=0\n    bonus_amount=0\n    \n    \n   \n    \n    for earning in doc.earnings:\n        if earning.salary_component == \"Uniform\":\n            uniform_amount = earning.amount\n        \n        if earning.salary_component == \"Medical\":\n            medical_amount = earning.amount\n            \n        if earning.salary_component == \"House Rent Allowance\":\n            hra_amount = earning.amount\n            \n        if earning.salary_component == \"Basic\":\n            basic_amount = earning.amount\n            \n        if earning.salary_component == \"Food Coupon\":\n            food_coupon_amount = earning.amount\n            \n        if earning.salary_component == \"TWA-DFI\":\n            twa_amount = earning.amount\n            \n        if earning.salary_component == \"HEEMA\":\n            heema_amount = earning.amount\n            \n        if earning.salary_component == \"Petrol Reimbursement\":\n            petrol_amount = earning.amount\n            \n        if earning.salary_component == \"Vehicle Maintenance Reimbursement\":\n            vehicle_amount = earning.amount\n            \n        if earning.salary_component == \"Driver Salary Reimbursement\":\n            driver_amount = earning.amount\n            \n        if earning.salary_component == \"Leave Travel Allowance\":\n            lta_amount = earning.amount\n            \n        if earning.salary_component == \"Car Perquisite\":\n            car_perquisite_amount = earning.amount\n            \n        if earning.salary_component == \"Driver Perquisite\":\n            driver_perquisite_amount = earning.amount\n            \n        if earning.salary_component == \"Bonus\":\n            bonus_amount = earning.amount\n            \n            \n            \n    \n    uniform.append(uniform_amount)\n    medical.append(medical_amount)\n    hra.append(hra_amount)\n    basic.append(basic_amount)\n    twa.append(twa_amount)\n    \n    food_coupon.append(food_coupon_amount)\n    heema.append(heema_amount)\n    \n    fuel.append(petrol_amount)\n    driver.append(driver_amount)\n    vehicle.append(vehicle_amount)    \n    lta.append(lta_amount)\n    \n    car_perquisite.append(car_perquisite_amount)\n    driver_perquisite.append(driver_perquisite_amount)\n    bonus.append(bonus_amount)\n    \n    \n    \n    \n   \n    \n    epf_amount=0\n    nps_amount=0\n    esic_amount=0\n    bonus_deduction_amount=0\n    \n    g_amount=0\n    m_amount=0\n    a_amount=0\n    w_amount=0\n    ka_amount=0\n    ke_amount=0\n    income_tax_amount=0\n    \n    for deduction in doc.deductions:\n        if deduction.salary_component == \"Employee Provident Fund\":\n            epf_amount = deduction.amount\n            \n        if deduction.salary_component == \"NPS\":\n            nps_amount = deduction.amount\n            \n        if deduction.salary_component == \"ESIC\":\n            esic_amount = deduction.amount\n            \n       \n        \n        if deduction.salary_component == \"Professional Tax (Gujarat)\":\n            g_amount = deduction.amount\n            \n        if deduction.salary_component == \"Professional Tax (Maharashtra)\":\n            m_amount = deduction.amount\n        if deduction.salary_component == \"Professional Tax (Andra Pradesh)\":\n            a_amount = deduction.amount\n        if deduction.salary_component == \"Professional Tax (West Bengal)\":\n            w_amount = deduction.amount\n        if deduction.salary_component == \"Professional Tax (Karnata)\":\n            ka_amount = deduction.amount\n        if deduction.salary_component == \"Professional Tax (Kerala)\":\n            ke_amount = deduction.amount\n            \n            \n        if deduction.salary_component == \"Income Tax\":\n            income_tax_amount = deduction.amount\n            \n        if deduction.salary_component == \"Bonus Deduction\":\n            bonus_deduction_amount = deduction.amount\n\n            \n        \n\n            \n        \n\n            \n        \n            \n            \n            \n    epf.append(epf_amount)\n    nps.append(nps_amount)\n    esic.append(esic_amount)\n   \n    pt_g.append(g_amount)\n    pt_m.append(m_amount)\n    pt_an.append(a_amount)\n    pt_w.append(w_amount)\n    pt_kar.append(ka_amount)\n    pt_ker.append(ke_amount)\n    \n    income_tax.append(income_tax_amount)\n    bonus_deduction.append(bonus_deduction_amount)\n\n\n   \n\n\n            \n            \n   \n\nfor k in range(len(employee)):\n    data.append([ss_id[k],employee[k], employee_name[k],income_tax_slab[k],employee_state[k],total_working_days[k],payment_days[k],leave_without_pay[k],start_date[k],end_date[k],annual_ctc[k],monthly_ctc[k],basic[k],hra[k],twa[k],uniform[k],medical[k],food_coupon[k],heema[k],bonus[k],fuel[k],vehicle[k],driver[k],lta[k],car_perquisite[k],driver_perquisite[k],epf[k],nps[k],esic[k],bonus_deduction[k],pt_g[k],pt_m[k],pt_ker[k],pt_kar[k],pt_w[k],pt_an[k],income_tax[k],gross_pay[k],net_pay[k],total_deduction[k]])\n\ndef execute(filters=None):\n    return columns, data\n    \n\ndata=columns,data,None,None,None\n    \n\n",
  "report_type": "Script Report",
  "roles": [
   {
    "parent": "Salary Slip Registers",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "HR User"
   },
   {
    "parent": "Salary Slip Registers",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "HR Manager"
   },
   {
    "parent": "Salary Slip Registers",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "Employee"
   },
   {
    "parent": "Salary Slip Registers",
    "parentfield": "roles",
    "parenttype": "Report",
    "role": "Employee Self Service"
   }
  ]
 }
]